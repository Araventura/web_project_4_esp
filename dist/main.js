!function(){"use strict";var e={};function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,o(n.key),n)}}function n(e,t,r){return(t=o(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e){var r=function(e,r){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===t(r)?r:String(r)}e.p="/";var i=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n(this,"_formClasses",null),n(this,"_formElement",null),this._formClasses=t,this._formElement=r}var t,o;return t=e,(o=[{key:"enableValidation",value:function(){this._formElement.addEventListener("submit",(function(e){e.preventDefault()})),this._setupValidationEventListeners()}},{key:"_setupValidationEventListeners",value:function(){var e=this;Array.from(this._formElement.querySelectorAll(this._formClasses.popupInputSelector)).forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t)}))}))}},{key:"_checkInputValidity",value:function(e){e.validity.valid?(this._hideInputError(e),this.toggleFormButton()):(this._showInputError(e),this.toggleFormButton())}},{key:"_showInputError",value:function(e){var t=this._formElement.querySelector("#".concat(e.id,"-wrapper")).querySelector(".popup__".concat(e.id,"-error-message"));e.classList.add("popup__input_error_invalid"),t.textContent=e.validationMessage,t.classList.add("popup__error-message_type_active")}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector("#".concat(e.id,"-wrapper")).querySelector(".popup__".concat(e.id,"-error-message"));t.classList.remove("popup__error-message_type_active"),t.classList.add("popup__error-message_type_inactive"),e.classList.remove("popup__input_error_invalid")}},{key:"toggleFormButton",value:function(){var e=Array.from(this._formElement.querySelectorAll(".popup__input-wrapper .popup__input"));if(e[0].validity.valid&&e[1].validity.valid){var t=this._formElement.querySelector(".popup__button");t.removeAttribute("disabled"),t.classList.remove("popup__button-inactive")}else{var r=this._formElement.querySelector(".popup__button");r.setAttribute("disabled",!0),r.classList.add("popup__button-inactive")}}},{key:"resetInputValidation",value:function(e){var t=Array.from(e.querySelectorAll(".popup .popup__container .form .popup__input-wrapper .popup__input"));Array.from(e.querySelectorAll(".popup .popup__container .form .popup__input-wrapper span")).forEach((function(e){e.classList.remove("popup__error-message_type_active"),e.classList.add("popup__error-message_type_inactive"),e.textContent=""})),t.forEach((function(e){e.classList.remove("popup__input_error_invalid")}))}}])&&r(t.prototype,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n)}}function a(e,t,r){return(t=l(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e){var t=function(e,t){if("object"!==u(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===u(t)?t:String(t)}var p=function(){function e(t,r,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,"_text",""),a(this,"_url",""),a(this,"_className",""),this._text=t,this._url=r,this._className=n,this._handleCardClick=o}var t,r;return t=e,(r=[{key:"_getTemplate",value:function(){return document.querySelector("#"+this._className).content.querySelector(".card__item").cloneNode(!0)}},{key:"generateCard",value:function(){this.element=this._getTemplate();var e=this.element.querySelector(".card__image"),t=this.element.querySelector(".card__wrapper .card__like");return this.element.querySelector(".card__trash").addEventListener("click",this._handleDeleteCard),e.addEventListener("click",this._handleCardClick),t.addEventListener("click",this._cardLikeButton),this.element.querySelector(".card__wrapper .card__title").textContent=this._text,e.alt=this._text,e.src=this._url,this.element}},{key:"_cardLikeButton",value:function(e){e.target.classList.toggle("card__like_active")}},{key:"_handleDeleteCard",value:function(e){e.target.closest(".card__item").remove()}}])&&c(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==s(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===s(o)?o:String(o)),n)}var o}var y=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.popup=document.querySelector(t),this.removeEventListeners(),this.setEventListeners()}var t,r;return t=e,(r=[{key:"open",value:function(){this.popup.classList.add("popup_open")}},{key:"close",value:function(){this.popup.classList.remove("popup_open")}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){null!=this.popup&&(this.popup.querySelector(".popup__close-button").addEventListener("click",this.close.bind(this)),this.popup.querySelector(".popup__backdrop").addEventListener("click",this.close.bind(this)),window.addEventListener("keydown",this._handleEscClose.bind(this)))}},{key:"removeEventListeners",value:function(){null!=this.popup&&(this.popup.querySelector(".popup__close-button").removeEventListener("click",this.close.bind(this)),this.popup.querySelector(".popup__backdrop").removeEventListener("click",this.close.bind(this)),window.removeEventListener("keydown",this._handleEscClose.bind(this)))}}])&&f(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==m(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===m(o)?o:String(o)),n)}var o}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(u,e);var t,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_(n);if(o){var r=_(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(r=i.call(this,t)).sendCallback=e,r.popup=document.querySelector(t),r.setEventListeners(),r}return t=u,(r=[{key:"_getInputValues",value:function(){popup.querySelectorAll(".popup__input")}},{key:"setEventListeners",value:function(){null!=this.popup&&(this.popup.querySelector(".popup__close-button").addEventListener("click",this.close.bind(this)),this.popup.querySelector(".popup__backdrop").addEventListener("click",this.close.bind(this)),window.addEventListener("keydown",this._handleEscClose.bind(this)),this.popup.querySelector(".form").addEventListener("submit",this.sendCallback),this.popup.querySelector(".popup__close-button").addEventListener("click",this.close.bind(this)))}},{key:"close",value:function(){this.popup.classList.remove("popup_open"),Array.from(this.popup.querySelectorAll(".popup__input")).forEach((function(e){e.value=""}))}}])&&d(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(y);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function S(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==h(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===h(o)?o:String(o)),n)}var o}function w(e,t){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},w(e,t)}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}(u,e);var t,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=E(n);if(o){var r=E(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),i.call(this,e)}return t=u,(r=[{key:"open",value:function(e){var t=e.target;this.popup.classList.add("popup_open"),this.popup.querySelector(".cover__image").src=t.src,this.popup.querySelector(".cover__subtitle").textContent=t.alt}}])&&S(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(y),k=new g(".cover"),q=new b((function(e){var t=document.querySelector("#input-name"),r=document.querySelector(".profile__description"),n=document.querySelector(".profile__name"),o=document.querySelector("#input-description");e.preventDefault(),n.textContent=t.value,r.textContent=o.value,q.close()}),"#popup-profile"),L=new b((function(e){e.preventDefault();var t=document.querySelector("#input-title"),r=document.querySelector("#input-url"),n=new p(t.value,r.value,"card_template",(function(e){k.open(e)})),o=n.generateCard();document.querySelector(".card").prepend(o),L.close()}),"#popup-card");document.addEventListener("DOMContentLoaded",(function(){document.querySelector(".page").classList.remove("preload")}));var j=e.p+"7045fa3b47bd2995db1f.png";document.getElementById("header-image").src=j;var O,P,C,B=new g(".cover");Array.from(document.querySelectorAll(".form")).forEach((function(e){new i({popupInputSelector:".popup__input"},e).enableValidation()})),[{name:"Valle de Yosemite",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/yosemite.jpg",alt:"Valle de Yosemite"},{name:"Lago Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/lake-louise.jpg",alt:"Lago Louise"},{name:"Montañas Calvas",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/bald-mountains.jpg",alt:"Montañas Calvas"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/latemar.jpg",alt:"Latemar"},{name:"Parque Nacional de la Vanoise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/vanoise.jpg",alt:"Parque Nacional de la Vanoise"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/lago.jpg",alt:"Lake di Braies"}].forEach((function(e){var t=new p(e.name,e.link,"card_template",(function(e){B.open(e)})).generateCard();document.querySelector(".card").prepend(t)})),O=document.querySelector(".profile__button-edit"),P=document.querySelector("#popup-close-add-card"),C=document.querySelector(".profile__button-add"),O.addEventListener("click",(function(){var e=document.querySelector("#input-name"),t=document.querySelector("#input-description"),r=document.querySelector(".profile__description"),n=document.querySelector("#popup-profile"),o=document.querySelector(".profile__name");e.value=o.textContent,t.value=r.textContent;var u=document.querySelector("#form-edit-profile");q.open();var c=new i({popupInputSelector:".popup__input"},u);c.toggleFormButton(),c.resetInputValidation(n)})),C.addEventListener("click",(function(){var e=document.querySelector("#input-title"),t=document.querySelector("#input-url"),r=document.querySelector("#popup-card");e.setAttribute("placeholder","Titulo"),t.setAttribute("placeholder","Enlace a la imagen"),e.value="",t.value="";var n=document.querySelector("#form-card");L.open();var o=new i({popupInputSelector:".popup__input"},n);o.toggleFormButton(),o.resetInputValidation(r)})),P.addEventListener("click",(function(){L.close()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ZSxFQUFZLElBQUk5RyxFQVZGLENBQ2xCa0IsbUJBQW9CLGlCQVMyQnNGLEdBQ2pETSxFQUFVckYsbUJBQ1ZxRixFQUFVQyxxQkFBcUJGLEVBQ2pDLElBakNFTixFQUFVN0YsaUJBQWlCLFNBb0Q3QixXQUNFLElBQU1rRixFQUFhdkMsU0FBU3pCLGNBQWMsZ0JBQ3BDOEQsRUFBbUJyQyxTQUFTekIsY0FBYyxjQUMxQ29GLEVBQWUzRCxTQUFTekIsY0FBYyxlQU01Q2dFLEVBQVdyRCxhQUFhLGNBQWUsVUFDdkNtRCxFQUFpQm5ELGFBQWEsY0FBZSxzQkFFN0NxRCxFQUFXbkYsTUFBUSxHQUNuQmlGLEVBQWlCakYsTUFBUSxHQUN6QixJQUFNK0YsRUFBT25ELFNBQVN6QixjQUFjLGNBQ3BDK0QsRUFBYUksT0FFYixJQUFNZSxFQUFZLElBQUk5RyxFQVpGLENBQ2xCa0IsbUJBQW9CLGlCQVcyQnNGLEdBQ2pETSxFQUFVckYsbUJBQ1ZxRixFQUFVQyxxQkFBcUJDLEVBQ2pDLElBcEVFVixFQUFlNUYsaUJBQWlCLFNBR2xDLFdBQ0VpRixFQUFhcEIsT0FDZixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJhY3RpY3VtL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3ByYWN0aWN1bS93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvcGFnZXMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvcGFnZXMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvcGFnZXMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3BhZ2VzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3BhZ2VzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9wYWdlcy91dGlscy5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIl9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiL1wiOyIsIi8vZXhwb3J0IGZvcm0gZm9yIEZvcm1WYWxpZGF0b3Jcbi8vZXN0YWJsZWNlIGxhIGNvbmZpZ3VyYWNpb24gcGFyYSB2YWxpZGFyIGxvcyBjYW1wb3MuIEVzdGUgZXMgdW4gY29uc3RydWN0b3Jcbi8vZG9zIHBhcmFtZXRyb3MgMSkgb2JqZXRvIHF1ZSBhbG1hY2VuYSBhIGxvcyBzZWxlY3RvcmVzXG4vLzIpdG9tYSB1biBlbGVtbnRvIGRlbCBmb3JtdWxhcmlvIGEgdmFsaWRhZFxuXG5leHBvcnQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIF9mb3JtQ2xhc3NlcyA9IG51bGw7XG4gIF9mb3JtRWxlbWVudCA9IG51bGw7XG5cbiAgY29uc3RydWN0b3IoZm9ybUNsYXNzZXMsIGZvcm1FbGVtZW50KSB7XG4gICAgdGhpcy5fZm9ybUNsYXNzZXMgPSBmb3JtQ2xhc3NlcztcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xuICB9XG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG4gICAgdGhpcy5fc2V0dXBWYWxpZGF0aW9uRXZlbnRMaXN0ZW5lcnMoKTsgLy9wYXNhIGVsIHZhbG9yIGRlIHByb3BpZWRhZCBkYXRhLnBvcHVwIGEgc2V0dXBWYWxpZGF0aW9uLi5cbiAgfVxuXG4gIF9zZXR1cFZhbGlkYXRpb25FdmVudExpc3RlbmVycygpIHtcbiAgICBjb25zdCBpbnB1dExpc3QgPSBBcnJheS5mcm9tKFxuICAgICAgdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9mb3JtQ2xhc3Nlcy5wb3B1cElucHV0U2VsZWN0b3IpXG4gICAgKTtcbiAgICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgICB0aGlzLnRvZ2dsZUZvcm1CdXR0b24oKTsgLy8gdGhpcyBmdW5jdGlvbiB0b2dnbGVzIGJ1dHRvbiwgcHJldmVudHMgZmFsc2UgZW50cmllc1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgICAgdGhpcy50b2dnbGVGb3JtQnV0dG9uKCk7IC8vZnVuY3Rpb24gdGhhdCB0b2dnbGVzIGJ1dHRvblxuICAgIH1cbiAgfVxuXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBpbnB1dFdyYXBwZXIgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0td3JhcHBlcmBcbiAgICApO1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IGlucHV0V3JhcHBlci5xdWVyeVNlbGVjdG9yKFxuICAgICAgYC5wb3B1cF9fJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yLW1lc3NhZ2VgXG4gICAgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInBvcHVwX19pbnB1dF9lcnJvcl9pbnZhbGlkXCIpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInBvcHVwX19lcnJvci1tZXNzYWdlX3R5cGVfYWN0aXZlXCIpO1xuICB9XG5cbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGNvbnN0IGlucHV0V3JhcHBlciA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS13cmFwcGVyYFxuICAgICk7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gaW5wdXRXcmFwcGVyLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgLnBvcHVwX18ke2lucHV0RWxlbWVudC5pZH0tZXJyb3ItbWVzc2FnZWBcbiAgICApO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfX2Vycm9yLW1lc3NhZ2VfdHlwZV9hY3RpdmVcIik7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9fZXJyb3ItbWVzc2FnZV90eXBlX2luYWN0aXZlXCIpO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfX2lucHV0X2Vycm9yX2ludmFsaWRcIik7XG4gIH1cblxuICB0b2dnbGVGb3JtQnV0dG9uKCkge1xuICAgIGNvbnN0IHBvcHVwSW5wdXRzID0gQXJyYXkuZnJvbShcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBfX2lucHV0LXdyYXBwZXIgLnBvcHVwX19pbnB1dFwiKVxuICAgICk7XG4gICAgaWYgKCFwb3B1cElucHV0c1swXS52YWxpZGl0eS52YWxpZCB8fCAhcG9wdXBJbnB1dHNbMV0udmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIGNvbnN0IGZvcm1CdXR0b24gPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19idXR0b25cIik7XG4gICAgICBmb3JtQnV0dG9uLnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsIHRydWUpO1xuICAgICAgZm9ybUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwicG9wdXBfX2J1dHRvbi1pbmFjdGl2ZVwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgZm9ybUJ1dHRvbiA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2J1dHRvblwiKTtcbiAgICAgIGZvcm1CdXR0b24ucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIik7XG4gICAgICBmb3JtQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9fYnV0dG9uLWluYWN0aXZlXCIpO1xuICAgIH1cbiAgfVxuXG4gIHJlc2V0SW5wdXRWYWxpZGF0aW9uKHBvcHVwKSB7XG4gICAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcbiAgICAgIHBvcHVwLnF1ZXJ5U2VsZWN0b3JBbGwoXG4gICAgICAgIFwiLnBvcHVwIC5wb3B1cF9fY29udGFpbmVyIC5mb3JtIC5wb3B1cF9faW5wdXQtd3JhcHBlciAucG9wdXBfX2lucHV0XCJcbiAgICAgIClcbiAgICApO1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZXMgPSBBcnJheS5mcm9tKFxuICAgICAgcG9wdXAucXVlcnlTZWxlY3RvckFsbChcbiAgICAgICAgXCIucG9wdXAgLnBvcHVwX19jb250YWluZXIgLmZvcm0gLnBvcHVwX19pbnB1dC13cmFwcGVyIHNwYW5cIlxuICAgICAgKVxuICAgICk7XG4gICAgZXJyb3JNZXNzYWdlcy5mb3JFYWNoKChtZXNzYWdlKSA9PiB7XG4gICAgICBtZXNzYWdlLmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9fZXJyb3ItbWVzc2FnZV90eXBlX2FjdGl2ZVwiKTtcbiAgICAgIG1lc3NhZ2UuY2xhc3NMaXN0LmFkZChcInBvcHVwX19lcnJvci1tZXNzYWdlX3R5cGVfaW5hY3RpdmVcIik7XG4gICAgICBtZXNzYWdlLnRleHRDb250ZW50ID0gXCJcIjtcbiAgICB9KTtcblxuICAgIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgaW5wdXQuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX19pbnB1dF9lcnJvcl9pbnZhbGlkXCIpO1xuICAgIH0pO1xuICB9XG59XG4iLCIvLyBhbGwgaW5mbyBvZiBjYXJkIHNob3VsZCBiZSBleHBvcnRlZCB0byBpbmRleC5qc1xuLy9wcm9kdWNlIHVuYSB0YXJqZXRhIHkgZW5sYWNlIGEgbGEgaW1hZ2VuLCBhcXVpIHNlIHByb2R1Y2UgbGEgY2FyZD8/XG4vL3RpZW5lIG1ldG9kb3MgcHJpdmFkb3MgcGFyYSBjYWRhIGV2ZW50IGxpc3RlbmVyXG4vL2Z1bmNpb24gcXVlIHByb2R1Y2UgdW5hIGNhcmQgeSAgZW5sYWNlIGEgbGEgaW1hZ2VuXG5cbmV4cG9ydCBjbGFzcyBDYXJkIHtcbiAgX3RleHQgPSBcIlwiO1xuICBfdXJsID0gXCJcIjtcbiAgX2NsYXNzTmFtZSA9IFwiXCI7XG5cbiAgY29uc3RydWN0b3IodGV4dCwgdXJsLCBjbGFzc05hbWUsIGhhbmRsZUNhcmRDbGljaykge1xuICAgIHRoaXMuX3RleHQgPSB0ZXh0O1xuICAgIHRoaXMuX3VybCA9IHVybDtcbiAgICB0aGlzLl9jbGFzc05hbWUgPSBjbGFzc05hbWU7XG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xuICB9XG5cbiAgX2dldFRlbXBsYXRlKCkge1xuICAgIGNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIiNcIiArIHRoaXMuX2NsYXNzTmFtZSlcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faXRlbVwiKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcblxuICAgIHJldHVybiBjYXJkVGVtcGxhdGU7XG4gIH1cblxuICBnZW5lcmF0ZUNhcmQoKSB7XG4gICAgdGhpcy5lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcbiAgICBjb25zdCBjYXJkSW1hZ2UgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcbiAgICBjb25zdCBjYXJkTGlrZUJ1dHRvbiA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIuY2FyZF9fd3JhcHBlciAuY2FyZF9fbGlrZVwiXG4gICAgKTtcblxuICAgIGNvbnN0IGNhcmRUcmFzaEJ1dHRvbiA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RyYXNoXCIpO1xuXG4gICAgY2FyZFRyYXNoQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVEZWxldGVDYXJkKTtcbiAgICBjYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZUNhcmRDbGljayk7XG4gICAgY2FyZExpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2NhcmRMaWtlQnV0dG9uKTtcblxuICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3dyYXBwZXIgLmNhcmRfX3RpdGxlXCIpLnRleHRDb250ZW50ID1cbiAgICAgIHRoaXMuX3RleHQ7XG5cbiAgICBjYXJkSW1hZ2UuYWx0ID0gdGhpcy5fdGV4dDtcbiAgICBjYXJkSW1hZ2Uuc3JjID0gdGhpcy5fdXJsO1xuXG4gICAgcmV0dXJuIHRoaXMuZWxlbWVudDtcbiAgfVxuXG4gIF9jYXJkTGlrZUJ1dHRvbihlKSB7XG4gICAgZS50YXJnZXQuY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2VfYWN0aXZlXCIpO1xuICB9XG5cbiAgX2hhbmRsZURlbGV0ZUNhcmQoZSkge1xuICAgIGUudGFyZ2V0LmNsb3Nlc3QoXCIuY2FyZF9faXRlbVwiKS5yZW1vdmUoKTtcbiAgfVxufVxuIiwiLy9hYnJlIHkgY2llcnJhIHZlbnRhbmEgZW1lcmdlbnRlXG5cbmV4cG9ydCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICB0aGlzLnBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLnBvcHVwLmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9vcGVuXCIpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfb3BlblwiKTtcbiAgfVxuXG4gIF9oYW5kbGVFc2NDbG9zZShlKSB7XG4gICAgaWYgKGUua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgaWYgKHRoaXMucG9wdXAgIT0gbnVsbCkge1xuICAgICAgdGhpcy5wb3B1cFxuICAgICAgICAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2xvc2UtYnV0dG9uXCIpXG4gICAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5jbG9zZS5iaW5kKHRoaXMpKTtcblxuICAgICAgdGhpcy5wb3B1cFxuICAgICAgICAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fYmFja2Ryb3BcIilcbiAgICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmNsb3NlLmJpbmQodGhpcykpO1xuXG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKSk7XG4gICAgfVxuICB9XG5cbiAgcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgaWYgKHRoaXMucG9wdXAgIT0gbnVsbCkge1xuICAgICAgdGhpcy5wb3B1cFxuICAgICAgICAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2xvc2UtYnV0dG9uXCIpXG4gICAgICAgIC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5jbG9zZS5iaW5kKHRoaXMpKTtcblxuICAgICAgdGhpcy5wb3B1cFxuICAgICAgICAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fYmFja2Ryb3BcIilcbiAgICAgICAgLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmNsb3NlLmJpbmQodGhpcykpO1xuXG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKSk7XG4gICAgfVxuICB9XG59XG4iLCIvLyoqKkZBTFRBIENyZWFyIHVuYSBpbnN0YW5jaWEgZGUgbGEgY2xhc2UgUG9wdXBXaXRoRm9ybSBwYXJhIGNhZGEgcG9wdXAuICovXG5pbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3RvcihzZW5kQ2FsbGJhY2ssIHNlbGVjdG9yKSB7XG4gICAgc3VwZXIoc2VsZWN0b3IpO1xuICAgIHRoaXMuc2VuZENhbGxiYWNrID0gc2VuZENhbGxiYWNrO1xuICAgIHRoaXMucG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTsgLy9yZWNpYmUgZWwgc2VsZWN0b3IgZGVsIHBvcHVwIC0tIGVzIG5lY2VzYXJpbyB5YSBxdWUgbGEgY2xhc2UgcGFkcmUgdGllbmUgYWNjZXNvIGFsIHBvcHVwPz9cXFxcXG4gICAgdGhpcy5zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG5cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIGNvbnN0IGlucHV0TGlzdCA9IHBvcHVwLnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBfX2lucHV0XCIpO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgaWYgKHRoaXMucG9wdXAgIT0gbnVsbCkge1xuICAgICAgdGhpcy5wb3B1cFxuICAgICAgICAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2xvc2UtYnV0dG9uXCIpXG4gICAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5jbG9zZS5iaW5kKHRoaXMpKTtcbiAgICAgIHRoaXMucG9wdXBcbiAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2JhY2tkcm9wXCIpXG4gICAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5jbG9zZS5iaW5kKHRoaXMpKTtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpKTtcbiAgICAgIHRoaXMucG9wdXBcbiAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybVwiKVxuICAgICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCB0aGlzLnNlbmRDYWxsYmFjayk7XG4gICAgICB0aGlzLnBvcHVwXG4gICAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jbG9zZS1idXR0b25cIilcbiAgICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmNsb3NlLmJpbmQodGhpcykpO1xuICAgIH1cbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMucG9wdXAuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX29wZW5cIik7XG4gICAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLnBvcHVwLnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBfX2lucHV0XCIpKTtcbiAgICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIGlucHV0LnZhbHVlID0gXCJcIjtcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHNlbGVjdG9yKSB7XG4gICAgc3VwZXIoc2VsZWN0b3IpO1xuICB9XG5cbiAgb3BlbihlKSB7XG4gICAgY29uc3QgaW1hZ2UgPSBlLnRhcmdldDtcbiAgICB0aGlzLnBvcHVwLmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9vcGVuXCIpO1xuICAgIHRoaXMucG9wdXAucXVlcnlTZWxlY3RvcihcIi5jb3Zlcl9faW1hZ2VcIikuc3JjID0gaW1hZ2Uuc3JjO1xuICAgIHRoaXMucG9wdXAucXVlcnlTZWxlY3RvcihcIi5jb3Zlcl9fc3VidGl0bGVcIikudGV4dENvbnRlbnQgPSBpbWFnZS5hbHQ7XG4gIH1cbn1cbiIsIi8vY29udHJvbGFkb3JlcyBkZSBldmVudG9zICYgZnVuY2lvbiBxdWUgYWJyZSAmY2llcnJhIGxhcyB2ZW50YW5hcyBtb2RhbGVzIHNlIGV4cG9ydGFuXG5pbXBvcnQgeyBGb3JtVmFsaWRhdG9yIH0gZnJvbSBcIi4vRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IHsgQ2FyZCB9IGZyb20gXCIuL0NhcmQuanNcIjtcbmltcG9ydCB7IFBvcHVwV2l0aEZvcm0gfSBmcm9tIFwiLi9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgeyBQb3B1cFdpdGhJbWFnZSB9IGZyb20gXCIuL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5cbmNvbnN0IHBvcHVwV2l0aEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiLmNvdmVyXCIpO1xuXG5jb25zdCBoYW5kbGVBZGRDYXJkID0gKGUpID0+IHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gIGNvbnN0IHRpdGxlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2lucHV0LXRpdGxlXCIpO1xuICBjb25zdCB1cmxJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaW5wdXQtdXJsXCIpO1xuICAvL3NlbGVjY2lvbmEgYSBsb3MgaW5wdXRzXG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcbiAgICB0aXRsZUlucHV0LnZhbHVlLFxuICAgIHVybElucHV0LnZhbHVlLFxuICAgIFwiY2FyZF90ZW1wbGF0ZVwiLFxuICAgIChlKSA9PiB7XG4gICAgICAvLyBmdW5jaW9uIHF1ZSBsbGFtYSBhIHBvcHVwd2l0aEltYWdlICYgb3BlbiB5IHBhc2EgZWwgZXZlbnRvIGNvbW8gcGFyYW1ldHJvXG4gICAgICBwb3B1cFdpdGhJbWFnZS5vcGVuKGUpO1xuICAgIH1cbiAgKTtcbiAgLy9wYXNhciBmdW5jaW9uIHF1ZSBjcmVhIGNhcmQgeSBwb3B1bGEgY29uIGluZm8gbGEgbnVldmEgY2FyZFxuICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuZ2VuZXJhdGVDYXJkKCk7XG4gIC8vcG9uIGNhcmQgYW50ZXMgZGUgbGlzdGEgZGUgY2FyZHNcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpLnByZXBlbmQoY2FyZEVsZW1lbnQpO1xuXG4gIGFkZENhcmRQb3B1cC5jbG9zZSgpO1xufTtcblxuY29uc3QgZWRpdFByb2ZpbGVQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxuICBzYXZlUHJvZmlsZURldGFpbHMsXG4gIFwiI3BvcHVwLXByb2ZpbGVcIlxuKTtcblxuY29uc3QgYWRkQ2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oaGFuZGxlQWRkQ2FyZCwgXCIjcG9wdXAtY2FyZFwiKTtcblxuLy90aGlzIGZ1bmN0aW9uIGFkZHMgZXZlbnQgbGlzdGVuZXJzIHRvIGJ1dHRvbnMgb24gYXBwIGxvYWRcbmV4cG9ydCBmdW5jdGlvbiBzZXR1cEV2ZW50TGlzdGVuZXJzKCkge1xuICBjb25zdCBlZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19idXR0b24tZWRpdFwiKTtcbiAgY29uc3QgY2xvc2VBZGRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3BvcHVwLWNsb3NlLWFkZC1jYXJkXCIpO1xuICBjb25zdCBhZGRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2J1dHRvbi1hZGRcIik7XG5cbiAgLy9PUEVOIGVkaXQgcG9wdXBQcm9maWxlIC1cbiAgZWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlRWRpdEJ1dHRvbik7XG5cbiAgLy9UaGlzIGZ1bmN0aW9uIHJlc3VzZXMgcG9wdXAgdG8gYWRkIGEgY2FyZFxuICBhZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG9wZW5BZGRDYXJkUG9wdXApO1xuXG4gIC8vY2xvc2VBZGRCdXR0b25cbiAgLy9mdW5jdGlvbiB0aGF0IGNsb3NlcyBhZGQgcG9wdXAgd2hlbiBjbGlja2VkXG4gIGNsb3NlQWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjbG9zZUFkZENhcmRQb3B1cCk7XG59XG5cbmZ1bmN0aW9uIGNsb3NlQWRkQ2FyZFBvcHVwKCkge1xuICBhZGRDYXJkUG9wdXAuY2xvc2UoKTtcbn1cblxuLy8gaGFuZGxlRWRpdEJ1dHRvblxuLy8gZGlzcGxheXMgYSB3aW5kb3cgZm9yIHVzZXIgdG8gbW9kaWZ5IHByb2ZpbGUgaW5mbywgaXQgd2lsbCBiZSByZXVzZWQgdG8gYWRkIGEgY2FyZFxuZnVuY3Rpb24gaGFuZGxlRWRpdEJ1dHRvbigpIHtcbiAgY29uc3QgbmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNpbnB1dC1uYW1lXCIpO1xuICBjb25zdCBkZXNjcmlwdGlvbklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNpbnB1dC1kZXNjcmlwdGlvblwiKTtcbiAgY29uc3QgcHJvZmlsZUluZm8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIpO1xuICBjb25zdCBwb3B1cFByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3BvcHVwLXByb2ZpbGVcIik7XG4gIGNvbnN0IHByb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19uYW1lXCIpO1xuXG4gIGNvbnN0IGZvcm1DbGFzc2VzID0ge1xuICAgIHBvcHVwSW5wdXRTZWxlY3RvcjogXCIucG9wdXBfX2lucHV0XCIsXG4gIH07XG5cbiAgbmFtZUlucHV0LnZhbHVlID0gcHJvZmlsZU5hbWUudGV4dENvbnRlbnQ7XG4gIGRlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSBwcm9maWxlSW5mby50ZXh0Q29udGVudDtcbiAgY29uc3QgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZm9ybS1lZGl0LXByb2ZpbGVcIik7XG5cbiAgZWRpdFByb2ZpbGVQb3B1cC5vcGVuKCk7XG5cbiAgY29uc3QgdmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybUNsYXNzZXMsIGZvcm0pO1xuICB2YWxpZGF0b3IudG9nZ2xlRm9ybUJ1dHRvbigpO1xuICB2YWxpZGF0b3IucmVzZXRJbnB1dFZhbGlkYXRpb24ocG9wdXBQcm9maWxlKTtcbn1cblxuLy9zYXZlUHJvZmlsZURldGFpbHNcbi8vIFdoZW4gY2xpY2tlZCwgc2F2ZXMgZWRpdGVkIGRhdGEgZnJvbSBwcm9maWxlIGluZm8uXG5cbmZ1bmN0aW9uIHNhdmVQcm9maWxlRGV0YWlscyhlKSB7XG4gIGNvbnN0IG5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaW5wdXQtbmFtZVwiKTtcbiAgY29uc3QgcHJvZmlsZUluZm8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIpO1xuICBjb25zdCBwcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fbmFtZVwiKTtcbiAgY29uc3QgZGVzY3JpcHRpb25JbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaW5wdXQtZGVzY3JpcHRpb25cIik7XG5cbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gIHByb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gbmFtZUlucHV0LnZhbHVlO1xuICBwcm9maWxlSW5mby50ZXh0Q29udGVudCA9IGRlc2NyaXB0aW9uSW5wdXQudmFsdWU7XG5cbiAgZWRpdFByb2ZpbGVQb3B1cC5jbG9zZSgpOyAvLyByZWVtcGxhemFyIHBvclxufVxuXG5mdW5jdGlvbiBvcGVuQWRkQ2FyZFBvcHVwKCkge1xuICBjb25zdCB0aXRsZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNpbnB1dC10aXRsZVwiKTtcbiAgY29uc3QgZGVzY3JpcHRpb25JbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaW5wdXQtdXJsXCIpO1xuICBjb25zdCBwb3B1cEFkZENhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3BvcHVwLWNhcmRcIik7XG5cbiAgY29uc3QgZm9ybUNsYXNzZXMgPSB7XG4gICAgcG9wdXBJbnB1dFNlbGVjdG9yOiBcIi5wb3B1cF9faW5wdXRcIixcbiAgfTtcblxuICB0aXRsZUlucHV0LnNldEF0dHJpYnV0ZShcInBsYWNlaG9sZGVyXCIsIFwiVGl0dWxvXCIpO1xuICBkZXNjcmlwdGlvbklucHV0LnNldEF0dHJpYnV0ZShcInBsYWNlaG9sZGVyXCIsIFwiRW5sYWNlIGEgbGEgaW1hZ2VuXCIpO1xuXG4gIHRpdGxlSW5wdXQudmFsdWUgPSBcIlwiO1xuICBkZXNjcmlwdGlvbklucHV0LnZhbHVlID0gXCJcIjtcbiAgY29uc3QgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZm9ybS1jYXJkXCIpO1xuICBhZGRDYXJkUG9wdXAub3BlbigpO1xuXG4gIGNvbnN0IHZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1DbGFzc2VzLCBmb3JtKTtcbiAgdmFsaWRhdG9yLnRvZ2dsZUZvcm1CdXR0b24oKTtcbiAgdmFsaWRhdG9yLnJlc2V0SW5wdXRWYWxpZGF0aW9uKHBvcHVwQWRkQ2FyZCk7XG59XG5cbi8vIHByZXZlbnRzIHBvcHVwIGZyb20gc2hvd2luZyB3aGVuIHJlbG9hZGluZyB3ZWJzaXRlLlxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgKCkgPT4ge1xuICBjb25zdCBwYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wYWdlXCIpO1xuICBwYWdlLmNsYXNzTGlzdC5yZW1vdmUoXCJwcmVsb2FkXCIpO1xufSk7XG4iLCIvL2Z1bmN0aW9uIGltcG9ydGVkIGZvciBjYXJkcyB0byBiZSBzaG93biBwcm9wZXJseS5cbmltcG9ydCBcIi4vcGFnZXMvaW5kZXguY3NzXCI7XG5pbXBvcnQgeyBGb3JtVmFsaWRhdG9yIH0gZnJvbSBcIi4vcGFnZXMvRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IHsgQ2FyZCB9IGZyb20gXCIuL3BhZ2VzL0NhcmQuanNcIjtcbmltcG9ydCB7IHNldHVwRXZlbnRMaXN0ZW5lcnMgfSBmcm9tIFwiLi9wYWdlcy91dGlscy5qc1wiO1xuaW1wb3J0IHsgUG9wdXBXaXRoSW1hZ2UgfSBmcm9tIFwiLi9wYWdlcy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IGhlYWRlckltZyBmcm9tIFwiLi9pbWFnZXMvSGVhZGVyaW1nLnBuZ1wiO1xuXG5jb25zdCBoZWFkZXJJbWFnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaGVhZGVyLWltYWdlXCIpO1xuaGVhZGVySW1hZ2Uuc3JjID0gaGVhZGVySW1nO1xuXG5jb25zdCBwb3B1cFdpdGhJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIi5jb3ZlclwiKTtcblxuY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICB7XG4gICAgbmFtZTogXCJWYWxsZSBkZSBZb3NlbWl0ZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9uZXctbWFya2V0cy9XRUJfc3ByaW50XzUvRVMveW9zZW1pdGUuanBnXCIsXG4gICAgYWx0OiBcIlZhbGxlIGRlIFlvc2VtaXRlXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhZ28gTG91aXNlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL25ldy1tYXJrZXRzL1dFQl9zcHJpbnRfNS9FUy9sYWtlLWxvdWlzZS5qcGdcIixcbiAgICBhbHQ6IFwiTGFnbyBMb3Vpc2VcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTW9udGHDsWFzIENhbHZhc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9uZXctbWFya2V0cy9XRUJfc3ByaW50XzUvRVMvYmFsZC1tb3VudGFpbnMuanBnXCIsXG4gICAgYWx0OiBcIk1vbnRhw7FhcyBDYWx2YXNcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9uZXctbWFya2V0cy9XRUJfc3ByaW50XzUvRVMvbGF0ZW1hci5qcGdcIixcbiAgICBhbHQ6IFwiTGF0ZW1hclwiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJQYXJxdWUgTmFjaW9uYWwgZGUgbGEgVmFub2lzZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9uZXctbWFya2V0cy9XRUJfc3ByaW50XzUvRVMvdmFub2lzZS5qcGdcIixcbiAgICBhbHQ6IFwiUGFycXVlIE5hY2lvbmFsIGRlIGxhIFZhbm9pc2VcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vbmV3LW1hcmtldHMvV0VCX3NwcmludF81L0VTL2xhZ28uanBnXCIsXG4gICAgYWx0OiBcIkxha2UgZGkgQnJhaWVzXCIsXG4gIH0sXG5dO1xuXG4vLyAgUmVuZGVyIGluaXRpYWwgY2FyZHNcbi8vIEZ1bmN0aW9uIHJlbmRlciBJbml0aWFsIENhcmRzIG9idGFpbnMgZGF0YSBmb3IgZWFjaCBhbmQgZXZlcnkgY2FyZCBhdmFpbGFibGUgaW4gdGhlIG9iamVjdC5cbmZ1bmN0aW9uIHJlbmRlckluaXRpYWxDYXJkcygpIHtcbiAgaW5pdGlhbENhcmRzLmZvckVhY2goKGRhdGFDYXJkKSA9PiB7XG4gICAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxuICAgICAgZGF0YUNhcmQubmFtZSxcbiAgICAgIGRhdGFDYXJkLmxpbmssXG4gICAgICBcImNhcmRfdGVtcGxhdGVcIixcbiAgICAgIChlKSA9PiB7XG4gICAgICAgIC8vIGZ1bmNpb24gcXVlIGxsYW1hIGEgcG9wdXB3aXRoSW1hZ2UgJiBvcGVuIHkgcGFzYSBlbCBldmVudG8gY29tbyBwYXJhbWV0cm9cbiAgICAgICAgcG9wdXBXaXRoSW1hZ2Uub3BlbihlKTtcbiAgICAgIH1cbiAgICApO1xuXG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKS5wcmVwZW5kKGNhcmRFbGVtZW50KTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHNldHVwVmFsaWRhdGlvbigpIHtcbiAgY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZm9ybVwiKSk7XG4gIGZvcm1MaXN0LmZvckVhY2goKGZvcm0pID0+IHtcbiAgICBjb25zdCBmb3JtQ2xhc3NlcyA9IHtcbiAgICAgIHBvcHVwSW5wdXRTZWxlY3RvcjogXCIucG9wdXBfX2lucHV0XCIsXG4gICAgfTtcblxuICAgIGNvbnN0IHZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1DbGFzc2VzLCBmb3JtKTtcbiAgICB2YWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuICB9KTtcbn1cblxuc2V0dXBWYWxpZGF0aW9uKCk7XG5yZW5kZXJJbml0aWFsQ2FyZHMoKTtcbnNldHVwRXZlbnRMaXN0ZW5lcnMoKTtcbiJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwicCIsIkZvcm1WYWxpZGF0b3IiLCJmb3JtQ2xhc3NlcyIsImZvcm1FbGVtZW50IiwiX2NsYXNzQ2FsbENoZWNrIiwiX2RlZmluZVByb3BlcnR5IiwidGhpcyIsIl9mb3JtQ2xhc3NlcyIsIl9mb3JtRWxlbWVudCIsImtleSIsInZhbHVlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJwcmV2ZW50RGVmYXVsdCIsIl9zZXR1cFZhbGlkYXRpb25FdmVudExpc3RlbmVycyIsIl90aGlzIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsInBvcHVwSW5wdXRTZWxlY3RvciIsImZvckVhY2giLCJpbnB1dEVsZW1lbnQiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsInRvZ2dsZUZvcm1CdXR0b24iLCJfc2hvd0lucHV0RXJyb3IiLCJlcnJvckVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29uY2F0IiwiaWQiLCJjbGFzc0xpc3QiLCJhZGQiLCJ0ZXh0Q29udGVudCIsInZhbGlkYXRpb25NZXNzYWdlIiwicmVtb3ZlIiwicG9wdXBJbnB1dHMiLCJmb3JtQnV0dG9uIiwicmVtb3ZlQXR0cmlidXRlIiwic2V0QXR0cmlidXRlIiwicG9wdXAiLCJpbnB1dExpc3QiLCJtZXNzYWdlIiwiaW5wdXQiLCJDYXJkIiwidGV4dCIsInVybCIsImNsYXNzTmFtZSIsImhhbmRsZUNhcmRDbGljayIsIl90ZXh0IiwiX3VybCIsIl9jbGFzc05hbWUiLCJfaGFuZGxlQ2FyZENsaWNrIiwiZG9jdW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiZWxlbWVudCIsIl9nZXRUZW1wbGF0ZSIsImNhcmRJbWFnZSIsImNhcmRMaWtlQnV0dG9uIiwiX2hhbmRsZURlbGV0ZUNhcmQiLCJfY2FyZExpa2VCdXR0b24iLCJhbHQiLCJzcmMiLCJ0YXJnZXQiLCJ0b2dnbGUiLCJjbG9zZXN0IiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwicmVtb3ZlRXZlbnRMaXN0ZW5lcnMiLCJzZXRFdmVudExpc3RlbmVycyIsImNsb3NlIiwiYmluZCIsIndpbmRvdyIsIl9oYW5kbGVFc2NDbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJQb3B1cFdpdGhGb3JtIiwiX1BvcHVwIiwiX2luaGVyaXRzIiwiX3N1cGVyIiwic2VuZENhbGxiYWNrIiwic2VsZWN0b3IiLCJjYWxsIiwiUG9wdXBXaXRoSW1hZ2UiLCJpbWFnZSIsInBvcHVwV2l0aEltYWdlIiwiZWRpdFByb2ZpbGVQb3B1cCIsIm5hbWVJbnB1dCIsInByb2ZpbGVJbmZvIiwicHJvZmlsZU5hbWUiLCJkZXNjcmlwdGlvbklucHV0IiwiYWRkQ2FyZFBvcHVwIiwidGl0bGVJbnB1dCIsInVybElucHV0IiwiY2FyZCIsIm9wZW4iLCJjYXJkRWxlbWVudCIsImdlbmVyYXRlQ2FyZCIsInByZXBlbmQiLCJnZXRFbGVtZW50QnlJZCIsImhlYWRlckltZyIsImVkaXRCdXR0b24iLCJjbG9zZUFkZEJ1dHRvbiIsImFkZEJ1dHRvbiIsImZvcm0iLCJlbmFibGVWYWxpZGF0aW9uIiwibmFtZSIsImxpbmsiLCJkYXRhQ2FyZCIsInBvcHVwUHJvZmlsZSIsInZhbGlkYXRvciIsInJlc2V0SW5wdXRWYWxpZGF0aW9uIiwicG9wdXBBZGRDYXJkIl0sInNvdXJjZVJvb3QiOiIifQ==